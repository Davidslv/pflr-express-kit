{% extends 'admin/admin-base/admin-base.html' %}

{% block page_title %}
Prop - Prototype
{% endblock %}

{% block admin_content %}
{% if not _blockType %}
{% set _blockType = getBlockProp(block, '_blockType') %}
{% endif %}
<p><a class="link-back" href="/admin/blocks/{{ _blockType }}">Back to {{ _blockType }}</a></p>

<h1 class="{{ govukClassname('heading-large') }}"><a class="xlink-back" href="/admin/block/{{ block }}">{{ block }}</a>{% if prop %}.{{ prop }}{% endif %}</h1>

{% if doesNotExist %}
<p>{{ block }} doesnâ€™t exist yet</p>
<p><a href="/admin/block/{{ block }}">Create {{ block }}</a></p>
{% else %}
<form method="post">
{% if noValue %}{% if propType != 'array' %}
{% set stringOption = { value: 'string', label: 'String', checked: true } %}
{% set arrayOption = { value: 'array', label: 'Array' } %}
{% set numberOption = { value: 'number', label: 'Number' } %}
{% set booleanOption = { value: 'boolean', label: 'Boolean' } %}
{% set propTypeOptions = [stringOption, arrayOption, numberOption, booleanOption] %}
{{ Block.RadioGroup('propType', options=propTypeOptions) }}
  {% else %}
  <input type="hidden" name="propType" value="{{ propType }}">
  {% endif %}
{% else %}
<input type="hidden" name="propType" value="{{ propType }}">
{% endif %}


<div class="propType {{ propType }}Prop">
{% if propType == 'string' %}
{{ Block.Text('value', value=value, multiline=true, rows=1) }}
{% endif %}
{% if propType == 'number' %}
{{ Block.Number('value', value=value) }}
{% endif %}
{% if propType == 'boolean' %}
{% set trueOption = { value: 'true', label: 'True', checked: value } %}
{% if not value %}{% set falseChecked = true %}{% endif %}
{% set falseOption = { value: 'false', label: 'False', checked: falseChecked } %}
{% set valueOptions = [trueOption, falseOption] %}
{{ Block.RadioGroup('value', options=valueOptions) }}
{% endif %}
{% if propType == 'array' %}
{% for valueItem in value %}
<div class="container propContainer">
{{ Block.Text('value', value=valueItem) }}
</div>
{% endfor %}
<div class="container propContainer">
{{ Block.Text('value', value='') }}
</div>
{% endif %}
</div>

<div class="admin-actions">
<button class="{{ govukClassname('button') }}">{% if noValue %}Add{% else %}Update{% endif %} {{ prop }}</button>
{% if not noValue %}
<button name="action" value="delete" class="{{ govukClassname('button') }} button--delete">Delete {{ prop }}</button>
{% endif %}
</div>
</form>
{% endif %}

{% endblock %}
